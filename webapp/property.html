<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Edit Property</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="/app/bootstrap/css/bootstrap.css"/>
    <style type="text/css">.CodeMirror {border-top: 1px solid darkgray; border-bottom: 1px solid darkgray;}</style>

    <script src="/app/lib/jquery-1.9.0.js"></script>
    <script src="/app/bootstrap/js/bootstrap.js"></script>

    <!-- CodeMirror Part-->
    <link rel="stylesheet" href="http://localhost:9000/app/lib/codemirror/codemirror.css"/>
    <script src="/app/lib/codemirror/codemirror.js" charset="UTF-8"></script>
    <script src="/app/lib/codemirror/xml.js" charset="UTF-8"></script>
    <script src="/app/lib/codemirror/javascript.js" charset="UTF-8"></script>
    <script src="/app/lib/codemirror/css.js" charset="UTF-8"></script>
    <script src="/app/lib/codemirror/htmlmixed.js" charset="UTF-8"></script>
    <script src="/app/lib/codemirror/htmlembedded.js" charset="UTF-8"></script>


    <script>
        function updateProp() {
            var value = myCodeMirror.getValue();
            var _body = {
                _value: value
            };

            $.post(document.location.href, _body,function (response) {
                // currently do nothing...
                $('#result').html("Updated");
            }).fail(function (e) {
                alert('[' + e.status + ']' + e.statusText);
            });
        }
    </script>

</head>
<body>
<h3>Property Edit</h3>

<div style="width: 800px; height: 400px;">
    <textarea id="value_edit" name="_value" rows="120" cols="200">${value}</textarea><br/>
</div>
<br/>
<button onclick="javascript:updateProp()">Update</button><p/>
Result: <span id="result"></span>


<script>

    var myCodeMirror = null;

    $(document).ready(function() {
        var codeArea = document.getElementById('value_edit');
        myCodeMirror = CodeMirror.fromTextArea(codeArea, {
            lineNumbers: true,
            mode: "application/x-ejs",
            indentUnit: 4,
            indentWithTabs: true
        });
    })
</script>
</body>
</html>